
# README для сервиса истории действий с товарами

## Описание
Этот проект представляет собой сервис, который отслеживает и хранит историю действий с товарами и остатками. Сервис позволяет отправлять события о действиях над продуктами или их остатками, а также предоставляет возможность получать эту информацию по различным фильтрам.

## Установка

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/sem-a/effective-test-history
   cd history-service
   ```

2. **Установите зависимости:**
   ```bash
   npm install
   ```

3. **Настройте базу данных:**
    - Создайте новую базу данных PostgreSQL.
    - Обновите файл `.env` с вашими данными подключения к базе:
      ```
      DATABASE_URL="postgresql://<пользователь>:<пароль>@localhost:<порт>/<имя_бд>"
      ```

4. **Инициализируйте Prisma (если используется):**
    ```bash
    npx prisma init
    ```

5. **Создайте миграцию базы данных:** 
    ```bash
    npx prisma migrate dev --name init_history_table 
    ```

6. **Заполните БД тестовыми данными (опционально).**

## Запуск приложения

Чтобы запустить приложение, используйте команду:

```bash
npm run start 
```
Приложение будет доступно по адресу http://localhost:3000.

### Эндпоинты API

- `POST /api/product/create`: Создает новый товар в системе.
  - Тело запроса должно содержать поля PLU, название продукта и другие необходимые данные.

- `GET /api/history/get`: Получает историю действий с возможностью фильтрации:
  - Параметры фильтрации могут включать shop_id, plu,
  date (с-по), action.
  
  Пример использования параметров:
  ```
  GET /api/history/get?shopId=123&plu=456&dateFrom=2023-01-01&dateTo=2023-12-31&action=sold
  ```

### Примечания 

Не забудьте установить все необходимые пакеты перед запуском приложения! Для получения дополнительной информации об использовании выбранного фреймворка обратитесь к его официальной документации.
